//背景图都为286*248的倒三角形 可以自行更换尺寸形状



<!doctype html>
<html>
    <head><script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script></head>
    <body>
        <style>
            .max{background:url(max.png) bottom center;width:286px;height:248px;position:relative;margin-top:300px;margin-left:500px;}
            .max input{display:none;}
            .max div{position:absolute;width:286px;bottom:0;}
            .content1{background:url(con1.png) no-repeat bottom center;}
            .content2{background:url(con2.png) no-repeat bottom center;}
            .content3{background:url(con3.png) no-repeat bottom center;}
            .content4{background:url(con4.png) no-repeat bottom center;}
            .content5{background:url(con5.png) no-repeat bottom center;}
            .content6{background:url(con6.png) no-repeat bottom center;}
        </style>
        <div class="max">
        </div>
        <input type="text" id="text" />
        <input type="text" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" onafterpaste="this.value=this.value.replace(/[^0-9]/g,'')" id="num" />
        <input type="button" id="button" />
        <script>
var a,b,c;
var max=100;//最大值/全部值
var content=[//内容数组
    ["1",33]
    ,["2",27]
    ,["3",90]
    ,["4",68]
];
var add =function(){
    content.sort(function(a,b){//数组从大到小重排序
        if(a[1] - b[1] < 0){
            return b[0] - a[0]
        }else if(a[1] == b[1]){
            return b[1] - a[1]
        }else{
            return b[1] - a[1]
        }
    });
    for(var i=0;i<content.length;i++){//填充图表数据
        $(".max").append("<div class='content"+(i+1)+"' title='"+content[i][0]+":"+content[i][1]+"'><!--"+content[i][0]+"--></div><input id='content"+(i+1)+"' value='"+content[i][1]+"' />");
        a="#content"+(i+1);
        c=".content"+(i+1);
        b=$(a)[0].value;
        $(c).animate({"height":b/max*100+"%"},750);
    }
}
add();
$("#button").click(function(){//添加数组
    if($("#text")[0].value!=""&&!isNaN($("#num")[0].value)){
    content.push([$("#text")[0].value,$("#num")[0].value]);
    $(".max").children().remove();
        add();  
    }
});

        </script>
    </body>
</html>
