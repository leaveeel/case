//暂时没有加上定时器，可以根据第一篇修改；
//touch：发现首次滑动后点击也会触发滑动效果，经检查是touchend记录了数据并没有清空，又到之前做的demo里确认了问题，暂时没有找到解决方法；


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="x-ua-compatible" content="IE=edge">
<title>1</title>
<meta name="keywords" content="1" />
<meta name="description" content="1" />
<link href="http://www.jushewang.com/css/public.css" rel="stylesheet" type="text/css" />
<script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<style>
.condition{width:750px;}
.condition .bigbox{width:750px;height:345px;overflow:hidden;}
.condition .box{width:1926px;margin-left:-487px;}
.condition .box li{margin:auto;margin-top:37px;width:432px;height:274px;float:left;position:relative;z-index:1;opacity:0.5}
.condition>span{display:block;width:28px;height:52px;cursor:pointer;z-index:11;top:133px;}
.condition .right{background:url(http://pic.jushewang.com/b2c_web/images/joinUs/right.png) no-repeat;right:20px;}
.condition .left{background:url(http://pic.jushewang.com/b2c_web/images/joinUs/left.png) no-repeat;left:20px;}
.condition .list{width:160px;margin:auto;margin-top:18px;}
.condition .list li{width:24px;height:24px;background:#bababa;color:#fff;font-size:18px;margin:0 4px;border-radius:50%;text-align:center;}
.condition .list li.cho{background:#fcb559;}
.condition .box li span{padding:14px 0;line-height:30px;min-height:42px;background:#fff;width:100%;text-align:center;position:absolute;bottom:0;left:0;font-size:14px;color:#666;}
/*公司简介*/
</style>
</head>
<body>
  <!--加盟条件-->
  <div class="wap condition pr">
	<div class="bigbox pr" id="conBanner">
		<div class="box">
			<li>
			<img src="http://pic.jushewang.com/b2c_web/images/joinUs/1.jpg" width=100%  style="">
			<span style="">认可并执行公司的加盟政策以及公司品牌、<br />货品管理要求。</span>
			</li>
			<li>
			<img class="" src="http://pic.jushewang.com/b2c_web/images/joinUs/2.jpg" width=100%  style="">
			<span style="">需以商家形式入驻，以公司、<br />个体工商为主体。</span>
			</li>
			<li>
			<img class="" src="http://pic.jushewang.com/b2c_web/images/joinUs/3.jpg" width=100%  style="">
			<span style="">诚邀各行业客户至公司交<br />流洽谈。如具有典当、珠宝、<br />腕表、服饰、化妆品、高端美容美发、<br />高端摄影等行业从业经历，优先考虑加盟合作。</span>
			</li>
			<li class="fir">
			<img class="" src="http://pic.jushewang.com/b2c_web/images/joinUs/4.jpg" width=100%  style="">
			<span style="">具备充足周转资金，以满足<br />正常运营及进出货需求。</span>
			</li>
			<li>
			<img class="" src="http://pic.jushewang.com/b2c_web/images/joinUs/5.jpg" width=100%  style="">
			<span style="">商家需具有良好的企业经营信誉<br />及优质沿街店铺门店。</span>
			</li>
		</div>
	</div>
	<span class="db right pa"></span>
	<span class="db left pa"></span>
	<ul class="oh list">
		<li class="fl cho">1</li>
		<li class="fl">2</li>
		<li class="fl">3</li>
		<li class="fl">4</li>
		<li class="fl">5</li>
	</ul>
  </div>
  <script>
$(".box li").first().before($(".box li").last());
$(".box li").first().before($(".box li").last());

$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px","opacity":"1"});
$(".box li").eq(3).css({"margin-left":"-272px"});
$(".box li").eq(2).find("span").css({"font-size":"24px"});


$(".left").click(function(){
	$(".box li").eq(1).stop().animate({"width":"544px","height":"345px","margin-top":"0px","margin-left":"-272px","z-index":"2","opacity":"1"},500);
	$(".box li").eq(1).find("span").stop().animate({"font-size":"24px"},500);
	$(".box li").eq(2).stop().animate({"width":"432px","height":"274px","margin-top":"37px","margin-left":"-272px","z-index":"1","opacity":"0.5"},500);
	$(".box li").eq(2).find("span").stop().animate({"font-size":"14px"},500);
	$(".box").stop().animate({"margin-left":"-55"},500,function(){
		$(".box li").first().before($(".box li").last());
		$(".box li").css({"margin-left":"0px","margin-top":"37px"});
		$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px"});
		$(".box li").eq(3).css({"margin-left":"-272px"});
		$(".box").css({"margin-left":"-487px"});
		var i = -$(".fir").index();
		$(".list li").eq(i).addClass("cho").siblings().removeClass("cho");
	});
});

$(".right").click(function(){
	$(".box li").eq(4).animate({"margin-left":"-272px"},500);
	$(".box li").eq(3).stop().animate({"width":"544px","height":"345px","margin-top":"0px","margin-left":"-272px","z-index":"2","opacity":"1"},500);
	$(".box li").eq(3).find("span").stop().animate({"font-size":"24px"},500);
	$(".box li").eq(2).stop().animate({"width":"432px","height":"274px","margin-top":"37px","margin-left":"0","z-index":"1","opacity":"0.5"},500);
	$(".box li").eq(2).find("span").stop().animate({"font-size":"14px"},500);
	$(".box").stop().animate({"margin-left":"-=432px"},500,function(){
		$(".box li").last().after($(".box li").first());
		$(".box li").css({"margin-left":"0px","margin-top":"37px"});
		$(".box li").eq(3).css({"margin-left":"-272px"});
		$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px"});
		$(".box").css({"margin-left":"-487px"});
		var i = -$(".fir").index();
		$(".list li").eq(i).addClass("cho").siblings().removeClass("cho");
	});
});

var startX, endX;
var showADID = 1;
	document.getElementById("conBanner").addEventListener("touchstart",touchStart,false);
	document.getElementById("conBanner").addEventListener("touchmove",touchMove,false);
	document.getElementById("conBanner").addEventListener("touchend",touchEnd,false);
	function touchStart(event){
		var touch = event.touches[0];
		startY=touch.pageY;
		startX=touch.pageX;
	}
function touchMove(event){
	var touch = event.touches[0];
	endX = touch.pageX;
}
function touchEnd(event){
	var line = startX-endX;
	if(line>100){
		$(".box li").eq(4).animate({"margin-left":"-272px"},500);
		$(".box li").eq(3).stop().animate({"width":"544px","height":"345px","margin-top":"0px","margin-left":"-272px","z-index":"2","opacity":"1"},500);
		$(".box li").eq(3).find("span").stop().animate({"font-size":"24px"},500);
		$(".box li").eq(2).stop().animate({"width":"432px","height":"274px","margin-top":"37px","margin-left":"0","z-index":"1","opacity":"0.5"},500);
		$(".box li").eq(2).find("span").stop().animate({"font-size":"14px"},500);
		$(".box").stop().animate({"margin-left":"-=432px"},500,function(){
			$(".box li").last().after($(".box li").first());
			$(".box li").css({"margin-left":"0px","margin-top":"37px"});
			$(".box li").eq(3).css({"margin-left":"-272px"});
			$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px"});
			$(".box").css({"margin-left":"-487px"});
			var i = -$(".fir").index();
			$(".list li").eq(i).addClass("cho").siblings().removeClass("cho");
		});
	}else if(line<-100){
		$(".box li").eq(1).stop().animate({"width":"544px","height":"345px","margin-top":"0px","margin-left":"-272px","z-index":"2","opacity":"1"},500);
		$(".box li").eq(1).find("span").stop().animate({"font-size":"24px"},500);
		$(".box li").eq(2).stop().animate({"width":"432px","height":"274px","margin-top":"37px","margin-left":"-272px","z-index":"1","opacity":"0.5"},500);
		$(".box li").eq(2).find("span").stop().animate({"font-size":"14px"},500);
		$(".box").stop().animate({"margin-left":"-55px"},500,function(){
			$(".box li").first().before($(".box li").last());
			$(".box li").css({"margin-left":"0px","margin-top":"37px"});
			$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px"});
			$(".box li").eq(3).css({"margin-left":"-272px"});
			$(".box").css({"margin-left":"-487px"});
			var i = -$(".fir").index();
			$(".list li").eq(i).addClass("cho").siblings().removeClass("cho");
		});
	}
}

$(".list li").click(function(){
	var o_index=$(".list li.cho").index();
	var index=$(this).index()-o_index;
	if(index>0){
		$(".box li").eq(3).stop().animate({"width":"544px","height":"345px","margin-top":"0px","z-index":"2","opacity":"1"},500);
		$(".box li").eq(2).stop().animate({"width":"432px","height":"274px","margin-top":"37px","margin-left":"0","z-index":"1","opacity":"0.5"},500);
		$(".box").stop().animate({"margin-left":(-432*(index+1)-55)},500,function(){
			for(var n=0;n<index;n++){
				$(".box li").last().after($(".box li").first());
			}
			$(".box li").css({"margin-left":"0px","margin-top":"37px","width":"432px","height":"274px","z-index":"1","opacity":"0.5"});
			$(".box li").eq(3).css({"margin-left":"-272px"});
			$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px","opacity":"1"});
			$(".box").css({"margin-left":"-487px"});
		})
	}else if(index<0){
		$(".box li").eq(1).stop().animate({"width":"544px","height":"345px","margin-top":"0px","z-index":"2","opacity":"1","margin-left":"-272px"},500);
		$(".box li").eq(2).stop().animate({"width":"432px","height":"274px","margin-top":"37px","margin-left":"0","z-index":"1","opacity":"0.5","margin-left":"-272px"},500);
		$(".box").stop().animate({"margin-left":(-432*(index+1))-55},500,function(){
			for(var n=0;n>index;n--){
				$(".box li").first().before($(".box li").last());
			}
			$(".box li").css({"margin-left":"0px","margin-top":"37px","width":"432px","height":"274px","z-index":"1","opacity":"0.5"});
			$(".box li").eq(3).css({"margin-left":"-272px"});
			$(".box li").eq(2).css({"width":"544px","height":"345px","z-index":"2","margin-top":"0px","margin-left":"-272px","opacity":"1"});
			$(".box").css({"margin-left":"-487px"});
		})
	}
	$(this).addClass("cho").siblings().removeClass("cho");
})
  </script>
</body>
</html>
